<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Letter2</title>
    <link rel='stylesheet' type='text/css' href='./assets/css/style.css'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">

</head>
<body class="bg-light">
    <div id='errors'>
    </div>

    <div id='holder'>
        <div class="col-lg-6 mx-auto bg-white p-2">
            <div class="d-flex bd-highlight align-items-center">
                <div class="pt-3 px-2 bd-highlight">
                    <p class="fs-4 fw-bolder">Referral Letter</p>
                </div>
                <!-- <div class="ms-auto bd-highlight">
                    <p class="fs-4 fw-bolder">Referral Letter</p>
                </div> -->
            </div>
            <hr class="mb-4">

            <table class="table table-striped table-bordered">

    <!-- display current date -->
                <caption><p>Generated: <span id="datetime"></span></p></caption>
                <thead>
                    <tr>
                        <th colspan="2" scope="col"><h5>Referral to</h5></th>
                        <th colspan="2" scope="col"><h5>Referral from</h5></th>
                    </tr>
                </thead>

    <!-- data submited from Index page -->
                <tbody>
                    <tr>
                        <th scope="row">Specialist:</th>
                        <td>
                            <span id="result-specialistName"></span>
                        </td>
                        <th scope="row">Name:</th>
                        <td>Mark Jacob</td>
                    </tr>
                    <tr>
                        <th scope="row">Address:</th>
                        <td>
                            <span id="result-address2"></span>
                            <span id="result-address1"></span>
                        </td>
                        <th scope="row">Provider Number:</th>
                        <td>32123321</td>
                    </tr>
                    <tr>
                        <th scope="row">State:</th>
                        <td>
                            <span id="result-state"></span>
                        </td>
                        <th scope="row">Phone:</th>
                        <td>049283756</td>
                    </tr>
                    <tr>
                        <th scope="row">Zip:</th>
                        <td>
                            <span id="result-zip"></span>
                        </td>
                        <th scope="row">Address:</th>
                        <td>123 Main Rd</td>
                    </tr>
                </tbody>
                <thead>
                    <tr>
                        <th colspan="4" scope="col"></th>
                    </tr>
                </thead>

    <!-- patient's context and optional display data sets-->
                <thead>
                    <tr>
                      <th colspan="2" scope="col"><h5>Client personal details</h5></th>
                      <th class="clientObservation" colspan="2" scope="col"><h5>Client observation details</h5></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">First Name:</th>
                        <td id='fname'></td>
                        <th class="clientObservation" scope="row">Height:</th>
                        <td class="clientObservation" id="height"></td>
                    </tr>
                    <tr>
                        <th scope="row">Last Name:</th>
                        <td id='lname'></td>
                        <th class="clientObservation" scope="row">Weight:</th>
                        <td class="clientObservation" id="weight"></td>
                    </tr>
                    <tr>
                        <th scope="row">Gender:</th>
                        <td id='gender'></td>
                        <th class="clientObservation" scope="row">Body Mass Index(BMI):</th>
                        <td class="clientObservation" id="bmi"></td>
                    </tr>
                    <tr>
                        <th scope="row">Date of Birth:</th>
                        <td id='birthdate'></td>
                        <th class="clientObservation" scope="row">Total Cholesterol:</th>
                        <td class="clientObservation" id="cholesterol"></td>
                    </tr>
                
                    <thead>
                        <tr>
                            <th colspan="4" scope="col"></th>
                        </tr>
                    </thead>

    <!-- data submited from Text Comments section on Index page -->
                    <thead>
                        <tr>
                            <th colspan="4" scope="col"><h5>General Comments</h5></th>
                        </tr>
                    </thead>
                    <tr>
                        <td colspan="4">
                            <span id="result-comment"></span>
                        </td>
                    </tr>
                </tbody>
            </table>

    <!-- buttons for print and go back to Index page -->
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                <button type="button" class="btn btn-primary me-md-2 d-print-none customButton" onclick="window.print()">Print</button>
                <button type="button" class="btn btn-secondary d-print-none customButton" onclick="javascript:window.history.back();">Back</button>
            </div>
        </div>
        
    </div>
    <script src='./assets/js/cerner.js'></script>

    <script src='./assets/lib/js/fhir-client-v0.1.12.js'></script>
    <script src='./assets/js/javascript.js'></script>
    <script src='./assets/lib/js/fhir-client-cerner-additions-1.0.0.js'></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <script>
    // data extraction from FHIR Server
      extractData().then(
        function(p) {
          drawVisualization(p);
        },

        function() {
          $('#loading').hide();
          $('#errors').html('<p> Failed to call FHIR Service </p>');
        }
      );


    // display current date
        var dt = new Date();
        document.getElementById("datetime").innerHTML = (("0"+dt.getDate()).slice(-2)) +"/"+ (("0"+(dt.getMonth()+1)).slice(-2)) +"/"+ (dt.getFullYear()) +" "+ (("0"+dt.getHours()).slice(-2)) +":"+ (("0"+dt.getMinutes()).slice(-2));
    </script>
</body>
</html>